# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Ä–∞–±–æ—Ç–Ω–∏–∫–∞–º

## –û–ø–∏—Å–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–Ω–∏–∫–∞–º –≤ Telegram –æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö, –∫–æ—Ç–æ—Ä—ã–µ —É –Ω–∏—Ö –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ —Å–µ–≥–æ–¥–Ω—è –∏–ª–∏ –∑–∞–≤—Ç—Ä–∞.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫:

```bash
python manage.py makemigrations
python manage.py migrate
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Celery Beat

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫—É—é –∑–∞–¥–∞—á—É –≤ Celery Beat.

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Django Admin (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä Django:
```bash
python manage.py runserver
```

2. –û—Ç–∫—Ä–æ–π—Ç–µ Django Admin: `http://localhost:8000/admin/`

3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "Periodic Tasks" (django_celery_beat)

4. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫—É—é –∑–∞–¥–∞—á—É:
   - **Name**: `Send Worker Event Notifications`
   - **Task**: `core.tasks.send_worker_event_notifications`
   - **Interval Schedule**: –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 09:00)
   - **Enabled**: ‚úì

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ –∫–æ–¥ (–≤ settings.py –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ñ–∞–π–ª–µ)

–î–æ–±–∞–≤—å—Ç–µ –≤ `config/celery.py`:

```python
from celery.schedules import crontab

app.conf.beat_schedule = {
    'send-worker-notifications': {
        'task': 'core.tasks.send_worker_event_notifications',
        'schedule': crontab(hour=9, minute=0),  # –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 09:00
    },
}
```

### 3. –ó–∞–ø—É—Å–∫ Celery Beat –∏ Worker

–í –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–∞—Ö –∑–∞–ø—É—Å—Ç–∏—Ç–µ:

```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 1: Redis (–µ—Å–ª–∏ –Ω–µ –∑–∞–ø—É—â–µ–Ω)
redis-server

# –¢–µ—Ä–º–∏–Ω–∞–ª 2: Celery Worker
celery -A config worker --loglevel=info

# –¢–µ—Ä–º–∏–Ω–∞–ª 3: Celery Beat
celery -A config beat --loglevel=info
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
2. –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Ä–∞–±–æ—Ç–Ω–∏–∫–∞–º"
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 09:00)
4. –í–∫–ª—é—á–∏—Ç–µ/–≤—ã–∫–ª—é—á–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
5. –ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"

**–í–∞–∂–Ω–æ**: –í—Ä–µ–º—è, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, –∫–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è. Celery Beat –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –∑–∞–ø—É—Å–∫ –∑–∞–¥–∞—á–∏ –≤ —ç—Ç–æ –≤—Ä–µ–º—è –∏–ª–∏ —á–∞—â–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∂–¥—ã–π —á–∞—Å, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏).

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. Celery Beat –∑–∞–ø—É—Å–∫–∞–µ—Ç –∑–∞–¥–∞—á—É `send_worker_event_notifications` –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è
2. –ó–∞–¥–∞—á–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–≤–∫–ª—é—á–µ–Ω—ã –ª–∏ –æ–Ω–∏ –∏ –∫–∞–∫–æ–µ –≤—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ)
3. –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ—Ö —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤ —Å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º–∏ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è –∏ –∑–∞–≤—Ç—Ä–∞
4. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–∞–∂–¥–æ–º—É —Ä–∞–±–æ—Ç–Ω–∏–∫—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö

## –§–æ—Ä–º–∞—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

```
üìÖ –£–í–ï–î–û–ú–õ–ï–ù–ò–ï –û –ú–ï–†–û–ü–†–ò–Ø–¢–ò–ò

üë§ –ò–º—è —Ä–∞–±–æ—Ç–Ω–∏–∫–∞

–£ –≤–∞—Å –µ—Å—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ —Å–µ–≥–æ–¥–Ω—è/–∑–∞–≤—Ç—Ä–∞ (–¥–∞—Ç–∞):

‚Ä¢ –ù–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏ - –ò–º—è –∫–ª–∏–µ–Ω—Ç–∞ (–†–µ—Å—Ç–æ—Ä–∞–Ω) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–º–µ—Ä

–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –±—É–¥—å—Ç–µ –≥–æ—Ç–æ–≤—ã –∫ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—é!
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Redis –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω
- Celery Worker –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω
- Celery Beat –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω
- Telegram —Å–µ—Ä–≤–∏—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω

